!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n){e.exports='<div id="aboutPageContent" class="additional-pages" style="display: none">\n    <h1>Сайт "Прогноз погоды"</h1>\n\n    <p>Сайт состоит из трех блоков:\n        <ul>\n            <li>\n                В шапке сайта находится форма с полем ввода и кнопкой "Искать" и переключатель механизма\n                запроса (два радиобаттона fetch/XHR) и меню, ведущее на другие страницы\n            </li>\n            <li>\n                Центральная часть содержит информационное описание для главной страницы. И прогноз погоды\n                для страницы конкретного города. В случае ошибки при запросе она отображает сообщение об\n                ошибке\n            </li>\n            <li>\n                В подвале сайта отображаются 5 последних городов, погоду в которых искал пользователь. При\n                ошибке запрос не добавляется в список.\n            </li>\n        </ul>\n    </p>\n    <h3>Детали</h3>\n    <p>\n        <ul>\n            <li>\n                При вводе текста в поле ввода и нажатие кнопки "Ввод" ( или по клику на кнопке "Искать" )\n                пользователь попадает на страницу с прогнозом погоды в заданном городе. При этом страницу\n                можно добавить в закладки или отправить сообщением - при открытии ссылки должен показаться\n                тот же город.\n            </li>\n            <li>\n                При изменении центра карты ( перетаскивание / зум ) должны отображаться данные по погоде\n                для центра карты\n            </li>\n            <li>\n                При поиске города он появляется верхним пунктов в списке последних запросов ( нижний блок\n                ), остальные пункты опускаются на 1 вниз. Пункты с номером больше 5 исчезают.\n            </li>\n            <li>\n                В любой точке на карте можно нажать \'Add to Favorites\' - это добавить точку с описанием в\n                список "Избранное". Из списка сущность можно удалить с помощью x возле записи. При клике на\n                запись в списке "Избранное" происходит переход на сохраненные координаты\n            </li>\n            <li>\n                Функция загрузки прогноза должна быть реализована в двух вариантах - с использованием fetch\n                и с использованием XHR. Блок с options для выбора (два пункта из которых всегда выбран\n                только один) какую из реализаций использовать для получения следующего прогноза.\n            </li>\n            <li>\n                Для загрузки прогноза погоды использовать сайт https://darksky.net/\n            </li>\n            <li>\n                Для получения координат по введенным данным использовать API Google Maps\n            </li>\n            <li>\n                В шапку страницы добавить меню с двумя пунктами Главная / О сайте Каждый пункт меню должен\n                открывать соответствующую страницу. "O сайте" - Отображает статическую информацию - ваше\n                имя, фото, ссылки на соцсети и свободный текст "Главная" - при входе на страницу сайт\n                определяет местоположение пользователя ( запросом на https://api.userinfo.io/userinfos ) и\n                перенаправляет на страницу с соответсвующими координатами\n            </li>\n            <li>\n                Должны поддерживаться ссылки с указанием города ( например /city/Minsk )\n            </li>\n        </ul>\n    </p>\n</div>'},function(e,n){e.exports='<div id="authorPageContent" class="additional-pages" style="display: none">\n    <h1>Anna Kiranova</h1>\n    <img id="author" src="https://avatars0.githubusercontent.com/u/35148952?s=400&u=c5a0d9bc1421c1739322d3e3c57a0b08c51bfda5&v=4"></img>\n    <div id="contactInfo">\n        <h3>Contact information:</h3>\n        <p class="contact">E-mail: <a href="anne.kiranova@gmail.com">anne.kiranova@gmail.com</a></p>\n        <p class="contact">GitHub: <a href="https://github.com/anna-kiranova">https://github.com/anna-kiranova</a></p>\n    </div>\n</div>'},function(e,n){e.exports='<div id="weatherPageContent" style="display: none">\n    <div id="mapContent" class="content-style"></div>\n</div>'},function(e,n,t){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.r(n);var a=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes=n.routes||[],this.eventBus=n.eventBus,window.addEventListener("hashchange",function(){return t.handleUrl(decodeURIComponent(window.location.hash))}),this.handleUrl(decodeURIComponent(window.location.hash))}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"handleUrl",value:function(e){var n=this;e=e.slice(1);var t=this.currentRoute,o=this.findNewActiveRoute(e),a=this.getRouteParams(o,e);return Promise.resolve().then(function(){if(t){var e;if(n.eventBus)(e=n.eventBus).trigger.apply(e,["route:"+t.name+":leave"].concat(r(n.currentRouteParams)));return t.onLeave&&t.onLeave.apply(t,r(n.currentRouteParams))}}).then(function(){if(o){var e;if(n.eventBus)(e=n.eventBus).trigger.apply(e,["route:"+o.name+":beforeenter"].concat(r(a)));return o.onBeforeEnter&&o.onBeforeEnter.apply(o,r(a))}}).then(function(){if(o){var e;if(n.eventBus)(e=n.eventBus).trigger.apply(e,["route:"+o.name+":enter"].concat(r(a)));return o.onEnter&&o.onEnter.apply(o,r(a))}}).then(function(){n.currentRoute=o,n.currentRouteParams=a})}},{key:"findNewActiveRoute",value:function(e){for(var n=0;n<this.routes.length;n++){var t=this.routes[n];if("string"==typeof t.match){if(e===t.match)return t}else if("function"==typeof t.match){if(t.match(e))return t}else if(t.match instanceof RegExp&&e.match(t.match))return t}}},{key:"getRouteParams",value:function(e,n){if(!e)return[];if(e.match instanceof RegExp){var t=n.match(e.match)||[];return t.shift(),t}return[]}}]),e}();function i(){var e=document.getElementById("content");document.getElementById("footer").style.display="none";for(var n=e.querySelectorAll("#content > div"),t=0;t<n.length;t++)n[t].style.display="none"}var c=t(0),s=t.n(c);function l(){i(),document.getElementById("aboutPageContent").style.display="block"}document.getElementById("content").innerHTML+=s.a;var u=t(1),f=t.n(u);function d(){i(),document.getElementById("authorPageContent").style.display="block"}document.getElementById("content").innerHTML+=f.a;var h,m,p,g,v=t(2),y=t.n(v);function w(e,n){return Promise.resolve(localStorage.setItem(e,n))}function b(e){return Promise.resolve(localStorage.getItem(e))}document.getElementById("content").innerHTML+=y.a;var E=[];function k(e){i();var n=document.getElementById("weatherPageContent");document.getElementById("footer").style.display="block",n.style.display="block";var t=!p;if(!p){(p=new ymaps.Map("mapContent",{center:[51.50853,-.12574],zoom:9,controls:["zoomControl","typeSelector","fullscreenControl"]})).events.add("boundschange",function(e,n){var t=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=this;t&&clearTimeout(t),t=setTimeout(function(){e.apply(i,o),t=null},n)}}(function(){!function(e){if(document.getElementById("weather-target").innerHTML='<img src="./icons/load.gif" width="300"></img>',document.getElementById("fetch").checked)fetch("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/b5cc0ae068f1ee7c89f7deff0ae38728/"+e+"?lang=en&units=si").then(function(e){if(e.ok)return e.json()}).then(function(e){B(e)}).catch(function(e){document.getElementById("weather-target").innerHTML='<img src="./icons/sad.png" width="80"></img><br><p>We are really sorry - the forecast is unavailable right now...</p>',console.log("There are some problems with receiving weather! "+e)});else{var n=new XMLHttpRequest;n.open("GET","https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/b5cc0ae068f1ee7c89f7deff0ae38728/"+e+"?lang=en&units=si",!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200!=n.status)document.getElementById("weather-target").innerHTML='<img src="./icons/sad.png" width="80"></img><br><p>We are really sorry - the forecast is unavailable right now...</p>',console.log(n.status+": "+n.statusText);else try{var e=JSON.parse(n.responseText);B(e)}catch(e){console.log("Attention! Incorrect answer "+e.message)}}}}(p.getCenter())},600));var r=new ymaps.control.Button({data:{image:"./icons/star.png",title:"Click to add favorite"},options:{size:"small",selectOnClick:!1}});r.events.add("click",I),p.controls.add(r)}e?function(e){fetch("https://maps.google.com/maps/api/geocode/json?address="+encodeURIComponent(e)+"&key=AIzaSyDa7DCL2NO9KMPd9DYVk_u3u0wCbm0XXFY").then(function(e){if(e.ok)return e.json();alert("There are some problems with receiving coordinates!")}).then(function(n){if(0!==n.results.length){var t=n.results[0].geometry.location.lat,r=n.results[0].geometry.location.lng;C([t,r]),g=e,function(e){return h.unshift(e),h=h.slice(0,5),w("history",JSON.stringify(h)).then(function(){return h})}(e).then(P)}}).catch(function(e){alert("Not found this place on the Earth! "+e)})}(e):t&&function(){var e=new Headers;e.append("Content-Type","application/json"),e.append("Accept","application/json"),fetch("https://ipinfo.io/?token=b06e0fc311d617",{method:"GET",headers:e,mode:"cors",cache:"default"}).then(function(e){if(e.ok)return e.json();throw console.log("ip-api failure:",e),new Error("ip-api failure")}).then(function(e){var n=e.loc,t=n.split(",");C([+t[0],+t[1]])})}(),b("history").then(function(e){return h=e?JSON.parse(e):[]}).then(P),b("favorites").then(function(e){return m=e?JSON.parse(e):[]}).then(function(e){for(var n=0;n<e.length;n++)E.push(O(e[n].name,e[n].lat_lon));T(e)})}function I(){var e=prompt("Введите название места",g);if(e&&(e=e.trim()),e){var n=p.getCenter();(function(e){return m.unshift(e),w("favorites",JSON.stringify(m)).then(function(){return m})})({lat_lon:n,name:e}).then(function(t){var r=O(e,n);E.unshift(r),T(t)})}}function B(e){var n=e.currently,t='<div class ="w"> Temperature: '.concat(n.temperature,' <img src="./icons/celsium.png" alt="C" width="15"></img></div>'),r='<div class ="w"> Right now: '.concat(n.summary," </div>"),o='<img class ="w" src="./icons/'.concat(n.icon,'.png" alt="').concat(n.icon,'" width="50" title="').concat(n.icon,'"></img>'),a='<div class ="w"> Pressure: '.concat(n.pressure," hPa</div>"),i='<div class ="w"> Humidity: '.concat(parseInt(100*n.humidity)," %</div>"),c='<div class ="w"> Wind speed: '.concat(n.windSpeed," m/s</div>");document.getElementById("weather-target").innerHTML=t+r+o+a+i+c}function C(e){p.panTo(e,{flying:!0})}function T(e){document.getElementById("favorites-target").innerHTML="";for(var n=function(n){var t=document.createElement("div");t.className="aItems";var r=document.createElement("a");r.href="#",r.onclick=function(){return C(e[n].lat_lon),!1},r.innerText=e[n].name;var o=document.createElement("a");o.innerHTML='<img src="./icons/delete.png" alt="x" width="15"></img>',o.href="#",o.onclick=function(){return!!confirm("Are you sure?")&&(p.geoObjects.remove(E[n]),E.splice(n,1),function(e){return m.splice(e,1),w("favorites",JSON.stringify(m)).then(function(){return m})}(n).then(T),!1)},t.appendChild(r),t.appendChild(o),document.getElementById("favorites-target").appendChild(t)},t=0;t<e.length;t++)n(t)}function P(e){document.getElementById("history-target").innerHTML="";for(var n=0;n<e.length;n++){var t=document.createElement("div"),r=document.createElement("a");t.className="aItems",r.href="#weather/"+e[n],r.innerText=e[n],t.appendChild(r),document.getElementById("history-target").appendChild(t)}}function O(e,n){var t=new ymaps.GeoObject({geometry:{type:"Point",coordinates:n},properties:{iconContent:e}},{preset:"islands#redStretchyIcon",draggable:!1});return p.geoObjects.add(t),t}ymaps.ready(function(){new a({routes:[{name:"weather",match:"",onEnter:k},{name:"weather",match:"weather",onEnter:k},{name:"weather",match:/weather\/(.+)/,onEnter:k},{name:"about",match:"about",onEnter:l},{name:"author",match:"author",onEnter:d}]})})}]);
//# sourceMappingURL=build.3e0ed727a623845606e7.js.map