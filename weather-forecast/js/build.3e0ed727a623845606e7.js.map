{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/aboutPage.html","webpack:///./src/pages/authorPage.html","webpack:///./src/pages/weatherForecastPage.html","webpack:///./src/js/router.js","webpack:///./src/js/hidePage.js","webpack:///./src/js/aboutPage.js","webpack:///./src/js/authorPage.js","webpack:///./src/js/history.js","webpack:///./src/js/favorites.js","webpack:///./src/js/weatherForecastPage.js","webpack:///./src/js/storage.js","webpack:///./src/js/debounce.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Router","options","_this","this","_classCallCheck","routes","eventBus","window","addEventListener","handleUrl","decodeURIComponent","location","hash","url","_this2","slice","previousRoute","currentRoute","newRoute","findNewActiveRoute","routeParams","getRouteParams","Promise","resolve","then","_this2$eventBus","trigger","apply","concat","_toConsumableArray","currentRouteParams","onLeave","_this2$eventBus2","onBeforeEnter","_this2$eventBus3","onEnter","length","route","match","RegExp","params","shift","hideAll","content","document","getElementById","style","display","nodes","querySelectorAll","showAboutPage","innerHTML","about","showAuthorPage","author","history","favorites","map","lastCity","setStorage","val","localStorage","setItem","getStorage","getItem","weather","points","showWeatherPage","city","weatherPageContent","firstStart","ymaps","Map","center","zoom","controls","events","add","fun","delay","timer","_len","arguments","args","Array","_key","clearTimeout","setTimeout","debounce","lat_lon","checked","fetch","response","ok","json","showWheather","catch","e","console","log","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","status","statusText","weatherData","JSON","parse","responseText","message","weatherUpdate","getCenter","favoriteButton","control","Button","data","image","title","size","selectOnClick","clickFavoriteButton","encodeURIComponent","alert","cityCoordinates","results","lat","geometry","lng","changeMapPosition","item","unshift","stringify","addHistory","showHistory","err","getCityCoordinates","hdr","Headers","append","method","headers","cache","Error","userinfo","loc","split","getUserCoordinates","historyJSON","favoritesJSON","push","createPoint","showFavorites","prompt","trim","addFavorite","w","currently","temp","temperature","sum","summary","icon","press","pressure","hum","parseInt","humidity","wind","windSpeed","panTo","flying","_loop","div","createElement","className","a","href","onclick","innerText","x","confirm","geoObjects","remove","splice","removeFavorite","appendChild","point","GeoObject","type","coordinates","properties","iconContent","preset","draggable","ready"],"mappings":"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","file":"js/build.3e0ed727a623845606e7.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = \"<div id=\\\"aboutPageContent\\\" class=\\\"additional-pages\\\" style=\\\"display: none\\\">\\n    <h1>Сайт \\\"Прогноз погоды\\\"</h1>\\n\\n    <p>Сайт состоит из трех блоков:\\n        <ul>\\n            <li>\\n                В шапке сайта находится форма с полем ввода и кнопкой \\\"Искать\\\" и переключатель механизма\\n                запроса (два радиобаттона fetch/XHR) и меню, ведущее на другие страницы\\n            </li>\\n            <li>\\n                Центральная часть содержит информационное описание для главной страницы. И прогноз погоды\\n                для страницы конкретного города. В случае ошибки при запросе она отображает сообщение об\\n                ошибке\\n            </li>\\n            <li>\\n                В подвале сайта отображаются 5 последних городов, погоду в которых искал пользователь. При\\n                ошибке запрос не добавляется в список.\\n            </li>\\n        </ul>\\n    </p>\\n    <h3>Детали</h3>\\n    <p>\\n        <ul>\\n            <li>\\n                При вводе текста в поле ввода и нажатие кнопки \\\"Ввод\\\" ( или по клику на кнопке \\\"Искать\\\" )\\n                пользователь попадает на страницу с прогнозом погоды в заданном городе. При этом страницу\\n                можно добавить в закладки или отправить сообщением - при открытии ссылки должен показаться\\n                тот же город.\\n            </li>\\n            <li>\\n                При изменении центра карты ( перетаскивание / зум ) должны отображаться данные по погоде\\n                для центра карты\\n            </li>\\n            <li>\\n                При поиске города он появляется верхним пунктов в списке последних запросов ( нижний блок\\n                ), остальные пункты опускаются на 1 вниз. Пункты с номером больше 5 исчезают.\\n            </li>\\n            <li>\\n                В любой точке на карте можно нажать 'Add to Favorites' - это добавить точку с описанием в\\n                список \\\"Избранное\\\". Из списка сущность можно удалить с помощью x возле записи. При клике на\\n                запись в списке \\\"Избранное\\\" происходит переход на сохраненные координаты\\n            </li>\\n            <li>\\n                Функция загрузки прогноза должна быть реализована в двух вариантах - с использованием fetch\\n                и с использованием XHR. Блок с options для выбора (два пункта из которых всегда выбран\\n                только один) какую из реализаций использовать для получения следующего прогноза.\\n            </li>\\n            <li>\\n                Для загрузки прогноза погоды использовать сайт https://darksky.net/\\n            </li>\\n            <li>\\n                Для получения координат по введенным данным использовать API Google Maps\\n            </li>\\n            <li>\\n                В шапку страницы добавить меню с двумя пунктами Главная / О сайте Каждый пункт меню должен\\n                открывать соответствующую страницу. \\\"O сайте\\\" - Отображает статическую информацию - ваше\\n                имя, фото, ссылки на соцсети и свободный текст \\\"Главная\\\" - при входе на страницу сайт\\n                определяет местоположение пользователя ( запросом на https://api.userinfo.io/userinfos ) и\\n                перенаправляет на страницу с соответсвующими координатами\\n            </li>\\n            <li>\\n                Должны поддерживаться ссылки с указанием города ( например /city/Minsk )\\n            </li>\\n        </ul>\\n    </p>\\n</div>\"","module.exports = \"<div id=\\\"authorPageContent\\\" class=\\\"additional-pages\\\" style=\\\"display: none\\\">\\n    <h1>Anna Kiranova</h1>\\n    <img id=\\\"author\\\" src=\\\"https://avatars0.githubusercontent.com/u/35148952?s=400&u=c5a0d9bc1421c1739322d3e3c57a0b08c51bfda5&v=4\\\"></img>\\n    <div id=\\\"contactInfo\\\">\\n        <h3>Contact information:</h3>\\n        <p class=\\\"contact\\\">E-mail: <a href=\\\"anne.kiranova@gmail.com\\\">anne.kiranova@gmail.com</a></p>\\n        <p class=\\\"contact\\\">GitHub: <a href=\\\"https://github.com/anna-kiranova\\\">https://github.com/anna-kiranova</a></p>\\n    </div>\\n</div>\"","module.exports = \"<div id=\\\"weatherPageContent\\\" style=\\\"display: none\\\">\\n    <div id=\\\"mapContent\\\" class=\\\"content-style\\\"></div>\\n</div>\"","'use strict';\n\nexport default class Router {\n    constructor(options) {\n        this.routes = options.routes || [];\n        this.eventBus = options.eventBus;\n        window.addEventListener('hashchange', () => this.handleUrl(decodeURIComponent(window.location.hash)));\n        this.handleUrl(decodeURIComponent(window.location.hash));\n    }\n    handleUrl(url) {\n        url = url.slice(1);\n        let previousRoute = this.currentRoute;\n        var newRoute = this.findNewActiveRoute(url);\n        let routeParams = this.getRouteParams(newRoute, url);\n        return Promise.resolve()\n            .then(() => {\n                if (previousRoute) {\n                    if (this.eventBus) {\n                        //\"route:about:leave\"\n                        this.eventBus.trigger('route:' + previousRoute.name + ':leave', ...this.currentRouteParams);\n                    }\n                    return (previousRoute.onLeave &&\n                        previousRoute.onLeave(...this.currentRouteParams));\n                }\n            })\n            .then(() => {\n                if (newRoute) {\n                    if (this.eventBus) {\n                        //\"route:about:beforeenter\"\n                        this.eventBus.trigger('route:' + newRoute.name + ':beforeenter', ...routeParams);\n                    }\n                    return (newRoute.onBeforeEnter &&\n                        newRoute.onBeforeEnter(...routeParams));\n                }\n            })\n            .then(() => {\n                if (newRoute) {\n                    if (this.eventBus) {\n                        //\"route:about:enter\"\n                        this.eventBus.trigger('route:' + newRoute.name + ':enter', ...routeParams);\n                    }\n                    return newRoute.onEnter && newRoute.onEnter(...routeParams);\n                }\n            })\n            .then(() => {\n                this.currentRoute = newRoute;\n                this.currentRouteParams = routeParams;\n            });\n    }\n    findNewActiveRoute(url) {\n        for (let i = 0; i < this.routes.length; i++) {\n            let route = this.routes[i];\n            if (typeof route.match === 'string') {\n                if (url === route.match) {\n                    return route;\n                }\n            }\n            else if (typeof route.match === 'function') {\n                if (route.match(url)) {\n                    return route;\n                }\n            }\n            else if (route.match instanceof RegExp) {\n                if (url.match(route.match)) {\n                    return route;\n                }\n            }\n        }\n    }\n    getRouteParams(newRoute, url) {\n        if (!newRoute) {\n            return [];\n        }\n        if (newRoute.match instanceof RegExp) {\n            var params = url.match(newRoute.match) || [];\n            params.shift();\n            return params;\n        }\n        else {\n            return [];\n        }\n    }\n}\n\n\n\n\n","'use strict';\n\nexport default function hideAll() {\n    let content = document.getElementById('content');\n    let footer = document.getElementById('footer');\n    footer.style.display = 'none';\n    let nodes = content.querySelectorAll('#content > div');\n    for (let i = 0; i < nodes.length; i++) {\n        nodes[i].style.display = 'none';\n    }\n}","'use strict';\n\nimport hideAll from './hidePage';\n\nimport about from '../pages/aboutPage.html';\ndocument.getElementById('content').innerHTML += about;\n\nexport default function showAboutPage() {\n    hideAll();\n    let aboutPageContent = document.getElementById('aboutPageContent');\n    aboutPageContent.style.display = 'block';\n}\n","'use strict';\n\nimport author from '../pages/authorPage.html';\ndocument.getElementById('content').innerHTML += author;\n\nimport hideAll from './hidePage';\n\nexport default function showAuthorPage() {\n    hideAll();\n    let authorPageContent = document.getElementById('authorPageContent');\n    authorPageContent.style.display = 'block';\n}\n","'use strict';\n\nimport {setStorage} from './storage';\nimport {getStorage} from './storage';\n\nlet history;\n\nexport function getHistory() {\n    return getStorage('history').then((historyJSON) => {\n        history = historyJSON ? JSON.parse(historyJSON) : [];\n        return history;\n    });\n}\n\nexport function addHistory(item) {\n    history.unshift(item);\n    history = history.slice(0, 5);\n    return setStorage('history', JSON.stringify(history)).then(() => history);\n}\n","'use strict';\n\nimport { setStorage } from './storage';\nimport { getStorage } from './storage';\n\nlet favorites;\n\nexport function getFavorites() {\n    return getStorage('favorites').then((favoritesJSON) => {\n        favorites = favoritesJSON ? JSON.parse(favoritesJSON) : [];\n        return favorites;\n    });\n}\n\nexport function addFavorite(item) {\n    favorites.unshift(item);\n    return setStorage('favorites', JSON.stringify(favorites)).then(() => favorites);\n}\n\nexport function removeFavorite(i) {\n    favorites.splice(i, 1);\n    return setStorage('favorites', JSON.stringify(favorites)).then(() => favorites);\n}","'use strict';\n\nimport weather from '../pages/weatherForecastPage.html';\ndocument.getElementById('content').innerHTML += weather;\n\nimport hideAll from './hidePage';\nimport debounce from './debounce';\nimport { getHistory, addHistory } from './history';\nimport { addFavorite, getFavorites, removeFavorite } from './favorites';\n\nlet map;\nlet lastCity;\nlet points = [];\n\nexport default function showWeatherPage(city) {\n    hideAll();\n    let weatherPageContent = document.getElementById('weatherPageContent');\n    let footer = document.getElementById('footer');\n    footer.style.display = 'block';\n    weatherPageContent.style.display = 'block';\n\n    let firstStart = !map;\n\n    if (!map) {\n        map = new ymaps.Map('mapContent', {\n            // London coordinates\n            center: [51.50853, -0.12574],\n            zoom: 9,\n            controls: ['zoomControl', 'typeSelector', 'fullscreenControl']\n        });\n\n        map.events.add(\n            'boundschange',\n            /* 600 - delay for getCenter, selected empirically\n            when the map is loading or moving from city to city, it 3 times receives coordinates, \n            the delay gives the opportunity to take only the last coordinates, \n            and so to reduce the number of weather forecast requests */\n            debounce(() => {\n                weatherUpdate(map.getCenter());\n            }, 600)\n        );\n\n        let favoriteButton = new ymaps.control.Button({\n            data: {\n                image: './icons/star.png',\n                title: 'Click to add favorite'\n            },\n            options: {\n                size: 'small',\n                selectOnClick: false\n            }\n        });\n\n        favoriteButton.events.add('click', clickFavoriteButton);\n\n        map.controls.add(favoriteButton);\n    }\n\n    if (city) {\n        getCityCoordinates(city);\n    } else if (firstStart) {\n        getUserCoordinates();\n    }\n\n    getHistory().then(showHistory);\n\n    getFavorites().then((favorites) => {\n        for (let i = 0; i < favorites.length; i++) {\n            points.push(createPoint(favorites[i].name, favorites[i].lat_lon));\n        }\n        showFavorites(favorites);\n    })\n}\n\nfunction clickFavoriteButton() {\n    // ask name of new favorite place\n    let name = prompt('Введите название места', lastCity);\n    if (name) {\n        name = name.trim();\n    }\n    if (!name) {\n        return;\n    }\n\n    // get lat&lon of the map center\n    let lat_lon = map.getCenter();\n\n    addFavorite({lat_lon, name}).then((favorites) => {\n        // create and put the point on map\n        let p = createPoint(name, lat_lon);\n        points.unshift(p);\n        showFavorites(favorites);\n    });\n}\n\nfunction getCityCoordinates(city) {\n    return fetch(\n        'https://maps.google.com/maps/api/geocode/json?address=' +\n            encodeURIComponent(city) +\n            '&key=AIzaSyDa7DCL2NO9KMPd9DYVk_u3u0wCbm0XXFY'\n    )\n        .then(function(response) {\n            if (response.ok) {\n                return response.json();\n            }\n            alert('There are some problems with receiving coordinates!');\n        })\n        .then(function(cityCoordinates) {\n            if (cityCoordinates.results.length === 0) {\n                return;\n            }\n            var lat = cityCoordinates.results[0].geometry.location.lat;\n            var lng = cityCoordinates.results[0].geometry.location.lng;\n            changeMapPosition([lat, lng]);\n            lastCity = city;\n            addHistory(city).then(showHistory);\n        })\n        .catch(function(err) {\n            alert('Not found this place on the Earth! ' + err);\n        });\n}\n\nfunction getUserCoordinates() {\n    let hdr = new Headers();\n    hdr.append('Content-Type', 'application/json');\n    hdr.append('Accept', 'application/json');\n    let params = {\n        method: 'GET',\n        headers: hdr,\n        mode: 'cors',\n        cache: 'default'\n    };\n    fetch('https://ipinfo.io/?token=b06e0fc311d617', params)\n        .then(function(response) {\n            if (response.ok) {\n                return response.json();\n            }\n            console.log('ip-api failure:', response);\n            throw new Error('ip-api failure');\n        })\n        .then(function(userinfo) {\n            let loc = userinfo.loc;\n            let lat_lon = loc.split(',');\n            changeMapPosition([+lat_lon[0], +lat_lon[1]]);\n        });\n}\n\nfunction weatherUpdate(lat_lon) {\n    document.getElementById('weather-target').innerHTML =\n        '<img src=\"./icons/load.gif\" width=\"300\"></img>';\n    if (document.getElementById('fetch').checked) {\n        fetch(\n            'https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/b5cc0ae068f1ee7c89f7deff0ae38728/' +\n                lat_lon +\n                '?lang=en&units=si'\n        )\n            .then(function(response) {\n                if (response.ok) {\n                    return response.json();\n                }\n            })\n            .then(function(weather) {\n                showWheather(weather);\n            })\n            .catch(function(e) {\n                document.getElementById('weather-target').innerHTML =\n                    '<img src=\"./icons/sad.png\" width=\"80\"></img><br><p>We are really sorry - the forecast is unavailable right now...</p>';\n                console.log(\n                    'There are some problems with receiving weather! ' + e\n                );\n            });\n    } else {\n        let xhr = new XMLHttpRequest();\n        xhr.open(\n            'GET',\n            'https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/b5cc0ae068f1ee7c89f7deff0ae38728/' +\n                lat_lon +\n                '?lang=en&units=si',\n            true\n        );\n        xhr.send();\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState != 4) return;\n            if (xhr.status != 200) {\n                document.getElementById('weather-target').innerHTML =\n                    '<img src=\"./icons/sad.png\" width=\"80\"></img><br><p>We are really sorry - the forecast is unavailable right now...</p>';\n                console.log(xhr.status + ': ' + xhr.statusText);\n            } else {\n                try {\n                    let weatherData = JSON.parse(xhr.responseText);\n                    showWheather(weatherData);\n                } catch (e) {\n                    console.log('Attention! Incorrect answer ' + e.message);\n                }\n            }\n        };\n    }\n}\n\nfunction showWheather(weather) {\n    let w = weather.currently;\n    let temp = `<div class =\"w\"> Temperature: ${\n        w.temperature\n    } <img src=\"./icons/celsium.png\" alt=\"C\" width=\"15\"></img></div>`;\n    let sum = `<div class =\"w\"> Right now: ${w.summary} </div>`;\n    let icon = `<img class =\"w\" src=\"./icons/${w.icon}.png\" alt=\"${\n        w.icon\n    }\" width=\"50\" title=\"${w.icon}\"></img>`;\n    let press = `<div class =\"w\"> Pressure: ${w.pressure} hPa</div>`;\n    let hum = `<div class =\"w\"> Humidity: ${parseInt(w.humidity * 100)} %</div>`;\n    let wind = `<div class =\"w\"> Wind speed: ${w.windSpeed} m/s</div>`;\n    document.getElementById('weather-target').innerHTML =\n        temp + sum + icon + press + hum + wind;\n}\n\nfunction changeMapPosition(lat_lon) {\n    map.panTo(lat_lon, {\n        /* Опции перемещения:\n                разрешить уменьшать и затем увеличивать зум\n                карты при перемещении между точками */\n        flying: true\n    });\n}\n\nfunction showFavorites(favorites) {\n    document.getElementById('favorites-target').innerHTML = '';\n    for (let i = 0; i < favorites.length; i++) {\n        let div = document.createElement('div');\n        div.className = 'aItems';\n        let a = document.createElement('a');\n        a.href = '#';\n        a.onclick = function() {\n            changeMapPosition(favorites[i].lat_lon);\n            return false;\n        };\n        a.innerText = favorites[i].name;\n        let x = document.createElement('a');\n        x.innerHTML = '<img src=\"./icons/delete.png\" alt=\"x\" width=\"15\"></img>';\n        x.href = '#';\n        x.onclick = function() {\n            if (!confirm('Are you sure?')) { return false };\n            map.geoObjects.remove(points[i]);\n            points.splice(i, 1);\n            removeFavorite(i).then(showFavorites);\n            return false;\n        };\n        div.appendChild(a);\n        div.appendChild(x);\n        document.getElementById('favorites-target').appendChild(div);\n    }\n}\n\nfunction showHistory(history) {\n    document.getElementById('history-target').innerHTML = '';\n    for (let i = 0; i < history.length; i++) {\n        let div = document.createElement('div');\n        let a = document.createElement('a');\n        div.className = 'aItems';\n        a.href = '#weather/' + history[i];\n        a.innerText = history[i];\n        div.appendChild(a);\n        document.getElementById('history-target').appendChild(div);\n    }\n}\n\nfunction createPoint(name, lat_lon) {\n    // create point and put it on the map\n    let point = new ymaps.GeoObject(\n        {\n            geometry: {\n                type: 'Point',\n                coordinates: lat_lon\n            },\n            properties: {\n                iconContent: name\n            }\n        },\n        {\n            preset: 'islands#redStretchyIcon',\n            draggable: false\n        }\n    );\n    map.geoObjects.add(point);\n    return point;\n}\n","'use strict';\n\n// async LS\nexport function setStorage(key, val) {\n    return Promise.resolve(localStorage.setItem(key, val));\n}\n\nexport function getStorage(key) {\n    return Promise.resolve(localStorage.getItem(key));\n}\n","'use strict';\n\nexport default function debounce(fun, delay) {\n    let timer = null;\n    return function(...args) {\n        let t = this;\n        function onComplete() {\n            fun.apply(t, args);\n            timer = null;\n        }\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = setTimeout(onComplete, delay);\n    };\n}\n","'use strict';\n\nimport Router from './js/router';\nimport showAboutPage from './js/aboutPage';\nimport showAuthorPage from './js/authorPage';\nimport showWeatherPage from './js/weatherForecastPage';\n\nymaps.ready(()=> {\n    new Router({\n        routes: [\n            {\n                name: 'weather',\n                match: '',\n                onEnter: showWeatherPage\n            },\n            {\n                name: 'weather',\n                match: 'weather',\n                onEnter: showWeatherPage\n            },\n            {\n                name: 'weather',\n                match: /weather\\/(.+)/,\n                onEnter: showWeatherPage\n            },\n            {\n                name: 'about',\n                match: 'about',\n                onEnter: showAboutPage\n            },\n            {\n                name: 'author',\n                match: 'author',\n                onEnter: showAuthorPage\n            }\n        ]\n    });\n});\n\n\n"],"sourceRoot":""}